<html>

<head>
    <title>JAVASCRIPT</title>
</head>

<body>

    <script>
        var obj = {
            data: {
                question: 'How are you',
                answer: 'I am good'
            }
        }
        obj = JSON.stringify(obj)
        let pr1 = new Promise((res, rej) => {
            let xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost:3000');
            xhr.setRequestHeader('Content-Type', 'application/json')
            xhr.send(JSON.stringify(obj));
            xhr.onload = function () {
                if (xhr.status === 200) {
                    res(xhr.responseText);
                }
            };
        })
        pr1.then(d => {
            console.log('DFDFSDFD', JSON.parse(d));
        })
        // ЗАДАНИЯ ДЛЯ РАЗМИНКИ!!!!!!)))

        //1) Задача состоит в следующем! Написать код который отправляет POST запрос со следующим body! 



        // И расширить серверную часть ниже добавить заголовки чтобы можно было отправить c любого домена и распарсить body и вернуть его!!



        // 2) Отправить запрос исgользуя fetch или xmlhttprequest которой содержит query в url  
        // http://localhost:3000/phones?priceS=7000&priceF=40000&color=black - вот пример, где ?priceS=7000&priceF=40000&color=black -  query
        // где 7000 - 40000 - диапазон цен, то есть в query фильтр, диапазон 7000 - 40000  и цвет черный
        // Делаем сервер, НА сервере есть массив с обьектов, использем модуль
        // чтобы распарсить priceS, priceF, color и отдаем отфильтрованный массив phones по этим 3-м критериям, соответственно если поменять диапазон цен или цвет то и
        // массив уже будет другой, не хардкодим)))
        let response = await fetch('http://localhost:3000/phones?priceS=7000&priceF=40000&color=black', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json;charset=utf-8'
            },
        });
        if (result.ok) {
        let result = await response.json();
        console.log(result);
        }



    </script>
</body>

</html>